---
title: "PTT Analysis of Entrance Exam Scores in Taiwan"
subtitle: "A Statistical Approach with R Code"
author:
  - Christine P. Chai
  - Microsoft
  - cpchai21@gmail.com
date: \today
output: 
        pdf_document:
                number_sections: true
                citation_package: natbib
header-includes: 
  - \renewcommand{\and}{\\}
bibliography: references.bib
biblio-style: apalike
link-citations: yes
---

\renewcommand{\cite}{\citep}

```{r latex-cite-command, include=FALSE}
# %\let\cite\citep
# % from \citep to \cite to cite in author style, e.g. [Mule, 2008]

# % \bibliographystyle{plainnat}
# %\citep: citation in parentheses, e.g. [Mule, 2008]
# %\citet: citation as author, e.g. Mule [2008]
# %\cite: citation as author, \citet by default 
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Ongoing work since 2019.

# Executive Summary {.unnumbered}

\textcolor{red}{Write something here}

# Disclaimer {.unnumbered}

The opinions and views expressed in this manuscript are those of the author and do not necessarily state or reflect those of Microsoft. The author has a statistics and engineering background, without any training in middle school or high school teaching.

# Introduction {#intro}

\section*{\textcolor{red}{Unfinished below}}

Consider making the introduction statistics-oriented, because we would like to focus on the statistical methodology. Most important is how to handle a real-time application problem.  

State this project as open-source and provide the GitHub link somewhere in the manuscript. Note that the name of GitHub repo may be changed later.  

Edit the paragraph of this manuscript's structure! Use cross-references for each chapter.  

\section*{\textcolor{red}{Unfinished above}}

```{r include-intro, child = '01-Introduction.Rmd'}
```

# Background {#background}

\section*{\textcolor{red}{Unfinished below}}

Elaborate on the following to enhance the background context:

- Starting in 2019, high school students are required to maintain a portfolio each semester to document their learning outcomes.^[<https://www.108epo.com/courses.php>]

- College entrance exam GSAT and AST: New rules in 2022 (not related to COVID)

- COVID-related rules for students who could not attend the exam  
Start writing about 2021 for both exams, because 2022 is still ongoing

\section*{\textcolor{red}{Unfinished above}}

```{r include-background, child = '02-Background.Rmd'}
```

# Data Description {#data}

\section*{\textcolor{red}{Unfinished below}}

Add the new PTT image and state **when** the registration restrictions were removed.  

Note that from 2018 to 2021, PTT limited new account registrations to only people with an email address from National Taiwan University.^[Screenshot obtained on May 26, 2020: <https://imgur.com/33fwrGH>]   

The good news is that this restriction has been removed.^[Screenshot obtained on February 5, 2022: <https://imgur.com/kaTsRpn>] As of 2022, anyone can register for an account on PTT with email^[<https://www.techbang.com/posts/88695-ptt-registration>] or mobile phone authentication^[<https://free.com.tw/ptt-id-registration-aotp/>].  

Also, list several mobile apps for readers to access PTT on a smart phone. Common apps include BePTT, Mo PTT, JPTT, and PiTT.

\section*{\textcolor{red}{Unfinished above}}

```{r include-data-description, child = '03-Data-Description.Rmd'}
```

# Exploratory Data Analysis {#eda}

```{r include-exploratory, child = '04-Exploratory.Rmd'}
```

# Linear Regression {#linear-reg}

```{r include-linear-reg, child = '05-Linear-Regression.Rmd'}
```

# Top Scorers: A Closer Look {#explore-top}

\section*{\textcolor{red}{Unfinished below}}  

Bivariate exploration subsection:  

Add my thoughts about categorical data analysis (e.g. proportional hazards model?!)  

\section*{\textcolor{red}{Unfinished above}}  

```{r include-linear-reg, child = '06-Top-Scorers.Rmd'}
```

# Logistic Regression {#logit-reg}

```{r include-logit-reg, child = '07-Logistic-Regression.Rmd'}
```

# Model Validation: In-Sample Prediction {#validation}

```{r include-in-sample-00, child = '08-In-Sample-00-Foreword.Rmd'}
```

## Implementation of In-Sample Prediction {#in-sample}

```{r include-in-sample-01, child = '08-In-Sample-01-Implementation.Rmd'}
```

## Interpretation of Confusion Matrix {#interpretation}

```{r include-in-sample-02, child = '08-In-Sample-02-Confusion-Matrix.Rmd'}
```

## Breakdown by High School Entrance Exam Scores {#another-breakdown}

```{r include-in-sample-03, child = '08-In-Sample-03-Score-Breakdown.Rmd'}
```

# Model Validation: Out-of-Sample Prediction {#out-of-sample}

```{r include-out-sample-00, child = '09-Out-Sample-00-Foreword.Rmd'}
```

## Separate Training and Testing Datasets

```{r include-out-sample-01, child = '09-Out-Sample-01-Sep-Explain.Rmd'}
```

### Implementation {#train-test-demo}

```{r include-out-sample-02, child = '09-Out-Sample-02-Sep-Implement.Rmd'}
```

### Organizing the Code for Reusability

```{r include-out-sample-03, child = '09-Out-Sample-03-Sep-Organize.Rmd'}
```

## Cross Validation

```{r include-out-sample-04, child = '09-Out-Sample-04-Cross-Validation.Rmd'}
```

### K-fold Cross Validation

```{r include-out-sample-05, child = '09-Out-Sample-05-K-Fold.Rmd'}
```

### Leave-one-out Cross Validation

```{r include-out-sample-06, child = '09-Out-Sample-06-Leave-One-Out.Rmd'}
```

## Comparison of Results {#cmp-results}

```{r include-out-sample-07, child = '09-Out-Sample-07-Comparison-Results.Rmd'}
```

# Recap of the Project {#recap}

```{r include-project-recap, child = '10-Project-Recap.Rmd'}
```

# Recommended Resources for Learning {#resources}

```{r include-additional-resources, child = '11-Additional-Resources.Rmd'}
```

# Final: Personal Scores and Remarks {#personal-remarks}

This manuscript is created because the author reflected on her own experience regarding high school and college entrance exams. Instead of dwelling on the past, the author decided to redirect her energy to something more meaningful and constructive. She leveraged the opportunity to apply her data science and research skills. In addition to statistical analysis, she also wanted to demonstrate full reproducibility of the project. Inspired by \citet{baumer2014r-markdown}, the author decided to incorporate $\mathsf{R}$ Markdown as a reproducible analysis tool into introductory statistics. She also designed her own template to create LaTeX Beamer PDF slides from $\mathsf{R}$ Markdown,^[<https://github.com/star1327p/r-beamer-template>] in which she included some commonly-used LaTeX functions.  

The author scored **HighSchool_PR** 95 in Year 2004, but she got admitted to Taipei First Girls' High School because the special class for math and science track had a separate admission process at that time. Taipei First Girls' High School^[http://web.fg.tp.edu.tw/~tfghweb/EnglishPage/index.php] usually requires **HighSchool_PR** 99 for admission, with few exceptions such as recruited athletes^[<https://www.sa.gov.tw/PageContent?n=1265>] and students with disabilities.^[<http://www.rootlaw.com.tw/LawArticle.aspx?LawID=A040080080001900-1020822>] Several years later, the policy changed so that students had to be admitted to the high school first in order to try for the special class placement within. Most students in the special class had **HighSchool_PR** 99 anyway, and the author was one of the few who did not. Hence the author wondered whether she would have similar academic performance, had she enrolled in a different high school commensurate to **HighSchool_PR** 95 in Taipei, Taiwan.    

The author got **College_Score** 69 on the General Scholastic Ability Test (GSAT) in Year 2007. She applied to several colleges, and one of them offered her early admission.^[<https://sites.google.com/site/christinepeijinnchai/resume-cv>] However, she was not satisfied with the outcome, so she decided to try for the Advanced Subjects Test (AST). She obtained an excellent score on the AST and got admitted to The Department of Electrical Engineering at National Taiwan University (NTUEE), one of the top colleges in Taiwan. NTUEE^[https://web.ee.ntu.edu.tw/eng/index.php] typically requires full marks (15 out of 15) in English, mathematics, and science in **College_Score** for the early admission through GSAT.^[https://university.1111.com.tw/univ_depinfo9.aspx?sno=100102&mno=520101] Most students at NTUEE had a **College_Score** of 70 or higher, at the time when 75 was the max possible score. But still a significant number of students got admitted through the AST in July, regardless of their GSAT score.    

## Comparison with the Data
  
The author's high school and college entrance exam scores are indicated as the red dot in the scatterplot below from Section \ref{bivariate}. We also added the reference lines for **HighSchool_PR** 80 and **College_Score 60**. **HighSchool_PR** 95 and **College_Score** 69 are definitely above-average scores, despite imperfect.      

```{r bivariate-dup}
plot(data_corr$HighSchool_PR, data_corr$College_Score,
     main = "High School and College Entrance Exam Scores",
     xlab="HighSchool_PR",
     ylab="College_Score")

abline(h=60,v=80)
points(x=95, y=69, col="red", pch=19)
```

Let's examine all of the **College_Score** datapoints given **HighSchool_PR** 95. There are seven points in the data, with median 68 and mean about 67.6. One of them is **College_Score** 69, the same score as the author's. (She personally did not respond to this survey in 2015 because she discovered this announcement a few years later.)     

```{r HighSchool-PR-95}
sort(data_corr$College_Score[which(data_corr$HighSchool_PR == 95)])
```

Let's also inspect the nearby values, i.e., the **College_Score** values given **HighSchool_PR** 94 or 96.   

For **HighSchool_PR** 94, there are ten **College_Score** values in the data. The median is 66, and the mean is 63. The author's **College_Score** would be the second highest score in this batch.   

```{r HighSchool-PR-94}
sort(data_corr$College_Score[which(data_corr$HighSchool_PR == 94)])
```

For **HighSchool_PR** 96, there are five **College_Score** values in the data. The median is 67, and the mean is 67.4. The author's **College_Score** would still be the second highest in this batch.  

```{r HighSchool-PR-96}
sort(data_corr$College_Score[which(data_corr$HighSchool_PR == 96)])
```

Finally, let's explore the **College_Score** values of **HighSchool_PR** 97-99. There are 58 datapoints, which account for 30.8% of the total data. The median of **College_Score** is 70, and the mean is 68. Note that the max possible **College_Score** is 75, and few respondents achieved 74 or 75 in the entire dataset. In the earlier graph of this subsection, **College_Score** 69 is about in the middle of the **College_Score** datapoints for **HighSchool_PR** 97-99. This observation is similar to what we discovered in the subset.   

```{r HighSchool-PR-97-to-99}
pr97to99 = sort(data_corr$College_Score[which(data_corr$HighSchool_PR %in% c(97,98,99))])

print(pr97to99)
print(paste("Number of datapoints:",length(pr97to99)))
print(paste("Median College_Score:",median(pr97to99)))
print(paste("Mean College_Score:",round(mean(pr97to99), digits=1)))
```

Given the author's **HighSchool_PR** 95 score, **College_Score** 69 is an above-average outcome. Although it is somewhat unfair to compare **HighSchool_PR** 95 with **HighSchool_PR** 97 as a nearby value, **College_Score** 69 is only one point below the median **College_Score** of the **HighSchool_PR** 97-99 group. We do not know whether the positive outcome is due to the fact that the author studied extra hard given the more competitive environment in her high school, and/or she received more resources than most respondents with **HighSchool_PR** 95.   

The most prestigious high schools in Taipei typically requires **HighSchool_PR** 97 or higher.^[<https://cclccl-life.blogspot.com/2013/06/blog-post_9.html>] Students in Taipei with **HighSchool_PR** 97 may receive significantly more resources than the ones with **HighSchool_PR** 95, despite the difference is only two percentage points. This phenomenon is less likely in areas where the **HighSchool_PR** requirement is not as high in their top local high schools. 

## Comparison with the Model Prediction

We also apply the logistic regression model in Section \ref{threshold-65}, which predicts the probability of a respondent achieving **College_Score** at least 65 with his/her **HighSchool_PR**. Given the author's **HighSchool_PR** 95 score, the predictive probability is about 64.6% in terms of how likely she would have achieved **College_Score** at least 65. As a reference, Section \ref{logit-point-est} shows that given **HighSchool_PR** 99, the estimated probability to achieve this is 76.9%. The numbers made the author feel better, because she still had a good chance of getting **College_Score** at least 65 given her original **HighSchool_PR**.   

```{r logit-pred-draft}
original_model = glm(CS_65up ~ HighSchool_PR, data=data_corr, family="binomial")
# summary(original_model)

my_data = data.frame(HighSchool_PR = 95, College_Score = 69, CS_65up = TRUE)

pred_prob = predict.glm(original_model, my_data, type="response")
# type="response" gives the predicted probabilities

pred_prob
```

\section*{\textcolor{red}{Unfinished below}}  

Again, the logistic regression model assumes all else are held equal. We also assume that most respondents attended a high school whose admission requirement is about their own **HighSchool_PR**. From this data, we cannot measure the effect from impostor syndrome -- one decided to study extra hard to compensate that he/she had a much lower **HighSchool_PR** compared with his/her classmates in high school. Given the goal of demonstrating statistical methods in this project, we do not think it is practical to find such people and compare their scores with the people who did not receive this opportunity. This can be a full research project in the education field.  

# Acknowledgments {.unnumbered}

The author would like to thank Dr. Mine Cetinkaya-Rundel and Dr. David Banks at Duke University; they both motivated the author to teach statistics and create reproducible work in $\mathsf{R}$. The author is also grateful to her Microsoft colleagues Smit Patel and Dylan Stout for troubleshooting GitHub issues.  

The author would also like to acknowledge Dr. Cliburn Chan and Dr. Janice McCarthy for introducing her to GitHub in the statistical computation course at Duke University. This provided her the foundations to use GitHub as a modern version control system in the first place.  

Finally, the author gives a special mention to her significant other, Hugh Hendrickson, for all his support in the author's professional career development.

# Appendix {.unnumbered}

\section*{\textcolor{red}{Unfinished below}}

```{r include-appendix, child = 'Appendix.Rmd'}
```


# References {.unnumbered #references}