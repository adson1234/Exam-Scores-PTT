---
title: "PTT Analysis of Entrance Exam Scores in Taiwan"
subtitle: "A Statistical Approach with R Code"
author:
  - Christine P. Chai
  - Microsoft
  - cpchai21@gmail.com
date: \today
output: 
        pdf_document:
                number_sections: true
                citation_package: natbib
header-includes: 
  - \renewcommand{\and}{\\}
bibliography: references.bib
biblio-style: apalike
link-citations: yes
---

\renewcommand{\cite}{\citep}

```{r latex-cite-command, include=FALSE}
# %\let\cite\citep
# % from \citep to \cite to cite in author style, e.g. [Mule, 2008]

# % \bibliographystyle{plainnat}
# %\citep: citation in parentheses, e.g. [Mule, 2008]
# %\citet: citation as author, e.g. Mule [2008]
# %\cite: citation as author, \citet by default 
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Ongoing work since 2019.

# Executive Summary {.unnumbered}

\textcolor{red}{Write something here}

## Disclaimer {.unnumbered}

The opinions and views expressed in this manuscript are those of the author and do not necessarily state or reflect those of Microsoft. The author has a statistics and engineering background, without any training in middle school or high school teaching.

# Introduction {#intro}

\section*{\textcolor{red}{Unfinished below}}

Consider making the introduction statistics-oriented, because we would like to focus on the statistical methodology. Most important is how to handle a real-time application problem.  

State this project as open-source and provide the GitHub link somewhere in the manuscript. Note that the name of GitHub repo may be changed later.  

Edit the paragraph of this manuscript's structure! Use cross-references for each chapter.  

\section*{\textcolor{red}{Unfinished above}}

```{r include-intro, child = '01-Introduction.Rmd'}
```

# Background {#background}

\section*{\textcolor{red}{Unfinished below}}

Elaborate on the following to enhance the background context:

- When did GSAT start?

- Starting in 2019, high school students are required to maintain a portfolio each semseter to document their learning outcomes.^[<https://www.108epo.com/courses.php>]

- College entrance exam GSAT and ACT: New rules in 2022 (not related to COVID)

- COVID-related rules for students who could not attend the exam  
Start writing about 2021 for both exams, because 2022 is still ongoing

\section*{\textcolor{red}{Unfinished above}}

```{r include-background, child = '02-Background.Rmd'}
```

# Data Description {#data}

\section*{\textcolor{red}{Unfinished below}}

Add the new PTT image and state **when** the registration restrictions were removed.  

Note that from 2018 to 2021, PTT limited new account registrations to only people with an email address from National Taiwan University.^[Screenshot obtained on May 26, 2020: <https://imgur.com/33fwrGH>]   

The good news is that this restriction has been removed.^[Screenshot obtained on February 5, 2022: <https://imgur.com/kaTsRpn>] As of 2022, anyone can register for an account on PTT with email^[<https://www.techbang.com/posts/88695-ptt-registration>] or mobile phone authentication^[<https://free.com.tw/ptt-id-registration-aotp/>].  

Also, list several mobile apps for readers to access PTT on a smart phone. Common apps include BePTT, Mo PTT, JPTT, and PiTT.

\section*{\textcolor{red}{Unfinished above}}

```{r include-data-description, child = '03-Data-Description.Rmd'}
```

# Exploratory Data Analysis {#eda}

\section*{\textcolor{red}{Unfinished below}}  

Explain the properties of the correlation coefficient.  

e.g. Between -1 and +1  

e.g. Low / medium / high correlation  

\section*{\textcolor{red}{Unfinished above}} 

```{r include-exploratory, child = '04-Exploratory.Rmd'}
```

# Linear Regression {#linear-reg}

\section*{\textcolor{red}{Unfinished below}}  

Elaborate on the foreword, because it cannot be just two lines.  

At least explain to readers what exactly is a linear regression.  

\section*{\textcolor{red}{Unfinished above}}  

```{r include-linear-reg, child = '05-Linear-Regression.Rmd'}
```

# Top Scorers: A Closer Look {#explore-top}

```{r include-linear-reg, child = '06-Top-Scorers.Rmd'}
```

# Logistic Regression {#logit-reg}

```{r include-logit-reg, child = '07-Logistic-Regression.Rmd'}
```

# Model Validation: In-Sample Prediction {#validation}

```{r include-in-sample-00, child = '08-In-Sample-00-Foreword.Rmd'}
```

## Implementation of In-Sample Prediction {#in-sample}

```{r include-in-sample-01, child = '08-In-Sample-01-Implementation.Rmd'}
```

## Interpretation of Confusion Matrix {#interpretation}

```{r include-in-sample-02, child = '08-In-Sample-02-Confusion-Matrix.Rmd'}
```

## Breakdown by High School Entrance Exam Scores {#another-breakdown}

```{r include-in-sample-03, child = '08-In-Sample-03-Score-Breakdown.Rmd'}
```

# Model Validation: Out-of-Sample Prediction {#out-of-sample}

```{r include-out-sample-00, child = '09-Out-Sample-00-Foreword.Rmd'}
```

## Separate Training and Testing Datasets

```{r include-out-sample-01, child = '09-Out-Sample-01-Sep-Explain.Rmd'}
```

### Implementation {#train-test-demo}

```{r include-out-sample-02, child = '09-Out-Sample-02-Sep-Implement.Rmd'}
```

### Organizing the Code for Reusability

```{r include-out-sample-03, child = '09-Out-Sample-03-Sep-Organize.Rmd'}
```

## Cross Validation

```{r include-out-sample-04, child = '09-Out-Sample-04-Cross-Validation.Rmd'}
```

### K-fold Cross Validation

```{r include-out-sample-05, child = '09-Out-Sample-05-K-Fold.Rmd'}
```

### Leave-one-out Cross Validation

```{r include-out-sample-06, child = '09-Out-Sample-06-Leave-One-Out.Rmd'}
```

## Comparison of Results {#cmp-results}

```{r include-out-sample-07, child = '09-Out-Sample-07-Comparison-Results.Rmd'}
```

# Recap of the Project {#recap}

This manuscript is a detailed example of a project from data collection to meaningful insights, and we assume a background equivalent to Statistics 101. In the end-to-end execution, we also demonstrated good coding practices such as user-defined functions, descriptive variable names, and helpful comments in code. These practices in `R` are transferable to other programming languages like Python and Java, which are commonly-used in the tech industry.    

We obtained small-scale data that are publicly available and articulated our thought process in each step. We started with data preprocessing (i.e., cleaning the data), explored the data, and applied statistical models to quantify the relationship between the two variables of interest. The first model we try does not always work out, and the model validation can reveal more data issues previously undiscovered in the exploratory phase. Given the new findings, we can try different ways to continue the analysis.  

Our original problem is to find the relationship between high school entrance exam scores and college entrance exam scores. The exploratory analysis in Chapter \ref{eda} shows a moderate positive association between the two sets of scores, with the correlation coefficient 0.50. However, this does not necessarily mean that the linear regression is the most appropriate model. Linear regression is widely used, but it is not a panacea for data analysis. Chapter \ref{linear-reg} states the four assumptions to be met in linear regression: linearity, nearly normal residuals, constant variability, and independent observations. When these assumptions are violated, we should not use the linear regression model.  

Although the linear regression did not work out, we took a deep dive to understand the data breakdown by high school entrance exam score category in Chapter \ref{explore-top}. It is possible that a model has different levels of performance in different ranges of the independent variable. Exploratory data analysis shows the data are left-skewed, i.e., much more respondents with high scores than low scores. This chapter is focused on the top scorers because they account for the majority of the respondents.  

The good news is that we can continue the data analysis through several ways:

- Transform the data to meet the assumption requirements

- Choose another model to investigate the relationship between the two variables

- Reformulate the problem and answer a different question from the data

In Chapter \ref{logit-reg}, we reformulated the problem to: Given a student's high school entrance exam score, estimate the probability of getting a college entrance exam score of at least 65. This statement binarizes the outcome of college entrance exam scores, so we discovered the relationship of the two variables in a different way. Sections \ref{logit-point-est} and \ref{logit-results} show that when the high school entrance exam score increases by one percentile, the odds of "success" increases by about 16.1% on average, i.e., getting a college entrance exam score at least 65. We are 95% confident  that the odds increase is between 10.6% and 22.9%.  

After implementing the logistic regression model, we also validated the results using in-sample prediction (Chapter \ref{validation}) and out-of-sample prediction (Chapter \ref{out-of-sample}). The accuracy is approximately 70% and consistent across both methods of prediction. About half of the respondents obtained a college entrance exam score at least 65, so the baseline is around 50% like a coin-flip. Hence the logistic regression model is doing much better compared with the baseline, and the detailed metrics are listed and explained in Section \ref{cmp-results}.  

We also examined the model results by high school entrance exam score category in Section \ref{another-breakdown}. Since this is a binary classification model, we focused on the confusion matrices of each category. For the respondents whose high school entrance exam score in the 0-79th percentile, the model predicted none of them to obtain a college entrance exam score of at least 65, but some respondents actually did succeed. For the respondents in the 80-89th percentile, the predictions are the same but with a higher proportion of unexpected successes. The model predictions consist of both success and non-success outcomes for the respondents in the 90-94th percentile. Finally, the model predicts all respondents in the 95-99th percentile to obtain a college entrance exam score of at least 65, and inevitably some of them did not achieve this. Given the single outcome prediction in most categories, we added zero columns/rows to ensure the 2x2 size of each confusion matrix.  

\section*{\textcolor{red}{Unfinished below}}

\textcolor{red}{Continue to separate this enormous \texttt{.Rmd} into smaller files.}

# Discussion and Conclusion

\section*{\textcolor{red}{Unfinished below}}   

Add a summary of our thought process in performing the data analysis  

From data collection to meaningful insights  

In addition to statistical concepts, we also demonstrated:  

machine learning, good coding practices, etc. Add something more!

Don't just list statistics resources. Need to have a context-specific discussion!  

\section*{\textcolor{red}{Unfinished below}}  

Consider adding subsections in the Discussion and Conclusion (e.g. Recap, Additional Resources, etc.)  

Consider moving the above to an earlier section as transition  

The Statistics 101 course covers the fundamental statistical concepts for students to perform data analysis, and the programming component is often included.      

Any resources to serve as a refresher to the readers?  

*OpenIntro Statistics* \cite{diez2019openintro}  

Coursera: Statistics with `R` Specialization^[<https://www.coursera.org/specializations/statistics>]  

For the next steps in learning statistics, we suggest reading *The Statistical Sleuth: A Course in Methods of Data Analysis* \cite{ramsey2013statistical}, which is the textbook for undergraduate-level regression analysis at Duke Statistical Science.^[<https://www2.stat.duke.edu/courses/Fall18/sta210.001/>] The book covers intermediate topics such as ANOVA (Analysis of Variance) and multiple linear regression. It also provides data files for case studies and exercises.^[<http://www.statisticalsleuth.com/>]  

For the advanced readers, we recommend the following graduate level statistics textbooks:

- *A First Course in Bayesian Statistical Methods* \cite{hoff2009first}

- *Statistical Inference* \cite{casella2021statistical}

- *Categorical Data Analysis* \cite{agresti2003categorical}

There are many other high-quality statistics textbooks, and we selected these as a starting point. If the readers are interested in a data science career, learning statistics builds the foundations and expands your toolbox to generate insights from data.^[<https://towardsdatascience.com/the-difference-between-data-science-and-statistics-168c7062c201>] We also recommend exploring Kaggle datasets^[<https://www.kaggle.com/datasets>] for hands-on practice. To get closer to analyzing real-world data, we encourage the readers to attend data hackathons, contribute to open-source projects, and/or volunteer technical skills at nonprofit organizations like Statistics Without Borders.^[<https://www.statisticswithoutborders.org/>]

# Final: Personal Remarks

Write something here  

Taipei First Girls' High School^[http://web.fg.tp.edu.tw/~tfghweb/EnglishPage/index.php] typically requires **HighSchool_PR** 99 for admission. There are some exceptions, such as recruited athletes, students with disabilities,^[<http://www.rootlaw.com.tw/LawArticle.aspx?LawID=A040080080001900-1020822>] and students under other extraordinary situations.^[<https://bit.ly/2WtRY63>]  

The Department of Electrical Engineering at National Taiwan University (NTUEE)^[https://web.ee.ntu.edu.tw/eng/index.php] typically requires
full marks (15 out of 15) in English, mathematics, and science in **College_Score** for the early admission.^[https://university.1111.com.tw/univ_depinfo9.aspx?sno=100102&mno=520101] Most students at NTUEE had a **College_Score** of 70 or higher, at the time when 75 was the max possible score. But still a significant number of students got admitted through the regular college entrance exam process in July.  

Finally, include my own scores as a datapoint for prediction.  

Treat this part as an anecdote and explain my motivation.  

\textcolor{red}{Don't show the numbers until I am ready to work on this section!}

# Acknowledgments {.unnumbered}

The author would like to thank Dr. Mine Cetinkaya-Rundel and Dr. David Banks at Duke University; they both motivated the author to teach statistics and create reproducible work in `R`. The author is also grateful to her Microsoft colleagues Smit Patel and Dylan Stout for troubleshooting GitHub issues.  

Finally, the author would like to acknowledge Dr. Cliburn Chan and Dr. Janice McCarthy for introducing her to GitHub in the statistical computation course at Duke University. This provided her the foundations to use GitHub as a modern version control system in the first place.

# Appendix {.unnumbered}

```{r include-appendix, child = 'Appendix.Rmd'}
```


# References {.unnumbered #references}